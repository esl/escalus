language: erlang
branches:
        only:
                - master
notifications:
        email: mongoose-im@erlang-solutions.com

otp_release:
        - R16B03

before_script:
        - make extra-deps
        - make mongooseim-start || cat deps/mongooseim/rel/mongooseim/log/ejabberd.log

script:
        - make
        - make test
        - make ct

after_script:
        - make mongooseim-stop
